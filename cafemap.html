<!DOCTYPE html>
<html ng-app = 'App'>
    <head>
        <meta charset="utf-8">
        <title>CafeMap</title>
        <script src="./lib/d3.js" charset="utf-8"></script>

        <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/angular_material/1.1.8/angular-material.min.css">
        
    
        <link rel="stylesheet" type="text/css" href="cafemap.css">
    </head>
 

<body>
    <div id="header">
        <div ng-controller="AppCtrl" ng-cloak>
            <md-button id="rating" ng-click="setRank()">Rating</md-button>
            <md-button id="budget" ng-click="setBudget()">Budget</md-button>
        </div>
    </div>
    <div id="main">
        <div id="left-header">
            <div id="open-content">
                <md-button id="open">Open<br>Day</md-button>
                <div ng-controller="AppCtrl" ng-cloak id="open-slider">
                    <md-slider-container>
                        <md-slider ng-model="open" min="0" max="1000" aria-label="open-day" id="slider" md-vertical md-range></md-slider>
                        <md-input-container>
                            <input flex type="number" ng-model="open" aria-label="open-day" aria-controls="slider">
                        </md-input-container>
                    </md-slider-container>
                </div>
            </div>
            <div id="congestion-content">
                 <md-button id="congestion">Congestion<br>Degree</md-button>
            </div>
            
        </div> 
        <div id="map"></div>
    </div>

    <script type="text/javascript" src="controller.js" ></script>
    
    <!-- Angular Material requires Angular.js Libraries -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular-animate.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular-aria.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular-messages.min.js"></script>
    <!-- Angular Material Library -->
    <script src="https://ajax.googleapis.com/ajax/libs/angular_material/1.1.8/angular-material.min.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCC1Tkn2no27id0ILNHD1glfyBI2elzAmI&callback=initMap&libraries=drawing,visualization" defer></script>

    <script>
        var app = angular.module('App', ["ngMaterial", "ngAnimate"])
        .controller("AppCtrl", function($scope){
            $scope.open = 0;
            $scope.setRank = function(){
                console.log("clicked");
                markerArray.forEach(function(marker){
                    marker.setMap(null);
                })
                for (var i=0; i<cafedata.length; i++){
                    setMarker(cafedata[i],"Rank")
                }
            };

            $scope.setBudget = function(){
                markerArray.forEach(function(marker){
                    marker.setMap(null);
                })
                for (var i=0; i<cafedata.length; i++){
                    setMarker(cafedata[i],"Lunch_Budget")
                }
            }
        });
        
    </script>

</body></html>